<nav>
  <div class="nav-container">
    <div class="nav-logo">
      <a href="index.html" class="nav-logo">
        <img src="images/logo.png" alt="UniQuest Logo">
        <span class="UniquestFont">Uniquest</span>
      </a>
    </div>

    <div class="nav-links">
      <a href="about.html">About Uniquest</a>
      <a href="Roadmap.html">Roadmap</a>
      <a href="resources.html">Resources</a>
    </div>

    <div class="nav-cta">
      <a href="https://calendar.app.google/BmUNypCZjLcHDvY5A" target="_blank" rel="noopener">Book Consultation</a>
    </div>

    <div class="lang-switcher" aria-label="Language switcher">
      <!-- Georgian flag must always be left -->
      <a href="#" id="switchToGeorgianLink" class="lang-flag-link" aria-label="Switch to Georgian" role="button" tabindex="0">
        <img src="images/Georgian-flag.png" alt="ქართული" />
      </a>

      <!-- UK flag must always be right. It must not block clicks. -->
      <span class="lang-flag-current" aria-hidden="true">
        <img src="images/UK-flag.png" alt="English" />
      </span>
    </div>
  </div>
</nav>

<style>
  .lang-switcher {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  /* Visual order enforced: Georgian left, UK right */
  .lang-switcher .lang-flag-link { order: 0; }
  .lang-switcher .lang-flag-current { order: 1; }

  /* Make sure the span can't block pointer events */
  .lang-flag-current { pointer-events: none; }

  .lang-flag-link img,
  .lang-flag-current img {
    display: block;
    width: 26px;
    height: auto;
    user-select: none;
  }

  .lang-flag-link { z-index: 2; text-decoration: none; cursor: pointer; }
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const georgianLink = document.getElementById('switchToGeorgianLink');
  if (!georgianLink) return;

  // compute file name
  const pathname = location.pathname; // e.g. /UniQuest/en/about.html or /en/index.html or /about.html
  const file = pathname.split('/').pop() || 'index.html';

  // replace any "/en/" segment with "/ka/"
  function makeKaFrom(path) {
    if (!path) return `/ka/${file}`;
    return path.replace(/\/en(\/|$)/i, '/ka$1');
  }

  let href = '';

  if (location.protocol === 'file:') {
    // local files: if path contains "/en/" replace, else use relative "ka/<file>"
    if (pathname.toLowerCase().includes('/en/')) {
      href = makeKaFrom(pathname);
    } else {
      // relative link works for file:// usage
      href = `ka/${file}`;
    }
  } else {
    // http(s) served site
    if (pathname.toLowerCase().includes('/en/')) {
      href = location.origin + makeKaFrom(pathname);
    } else if (pathname.toLowerCase().includes('/ka/')) {
      // already in ka, keep same page
      href = location.origin + pathname;
    } else {
      // not in language folder: put site-root /ka/<file>, or preserve project subfolder like /UniQuest/
      const parts = pathname.split('/').filter(Boolean);
      if (parts[0] && parts[0].toLowerCase() === 'uniquest') {
        href = location.origin + '/UniQuest/ka/' + file;
      } else {
        href = location.origin + '/ka/' + file;
      }
    }
  }

  // set href for normal anchor behavior and store on dataset for the click handler
  georgianLink.setAttribute('href', href);
  georgianLink.dataset.target = href;

  // ensure navigation works regardless of environment by forcing location.assign
  georgianLink.addEventListener('click', function (ev) {
    ev.preventDefault();
    const target = georgianLink.dataset.target || georgianLink.getAttribute('href');
    if (!target) return;
    // If it's an absolute URL use assign. If it is relative use assign too.
    window.location.assign(target);
  });

  // support Enter key when focused
  georgianLink.addEventListener('keydown', function (ev) {
    if (ev.key === 'Enter' || ev.key === ' ') {
      ev.preventDefault();
      georgianLink.click();
    }
  });
});
</script>
