<nav>
  <div class="nav-container">
    <div class="nav-logo">
      <a href="index.html" class="nav-logo">
        <img src="images/logo.png" alt="UniQuest Logo">
        <span class="UniquestFont">Uniquest</span>
      </a>
    </div>

    <div class="nav-links">
      <a href="about.html">About Uniquest</a>
      <a href="Roadmap.html">Roadmap</a>
      <a href="resources.html">Resources</a>
    </div>

    <div class="nav-cta">
      <a href="https://calendar.app.google/BmUNypCZjLcHDvY5A" target="_blank" rel="noopener">Book Consultation</a>
    </div>

    <div class="lang-switcher" aria-label="Language switcher">
      <!-- Georgian flag must appear left. class "ge" enforces order via CSS. -->
      <a href="#" id="switchToGeorgianLink" class="lang-flag-link ge" aria-label="Switch to Georgian">
        <img src="images/Georgian-flag.png" alt="ქართული">
      </a>

      <!-- UK flag always on the right. -->
      <span class="lang-flag-current uk" aria-hidden="true">
        <img src="images/UK-flag.png" alt="English">
      </span>
    </div>
  </div>
</nav>

<style>
  .lang-switcher {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  /* force visual order regardless of DOM order */
  .lang-switcher .ge { order: 0; }
  .lang-switcher .uk { order: 1; }

  .lang-flag-link img,
  .lang-flag-current img {
    display: block;
    width: 24px;
    height: auto;
  }

  .lang-flag-link { text-decoration: none; cursor: pointer; }
</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const georgianLink = document.getElementById('switchToGeorgianLink');
  if (!georgianLink) return;

  const pathname = location.pathname; // e.g. /UniQuest/en/about.html or /en/index.html
  const currentFile = pathname.split('/').pop() || 'index.html';

  // helper that replaces "/en/" or trailing "/en" with "/ka/"
  function replaceEnWithKa(path) {
    return path.replace(/\/en(\/|$)/i, '/ka$1');
  }

  let href = '';

  if (location.protocol === 'file:') {
    // local files: try to replace /en/ with /ka/, otherwise use relative ka/<file>
    if (pathname.toLowerCase().includes('/en/')) {
      href = replaceEnWithKa(pathname);
    } else {
      href = `ka/${currentFile}`;
    }
  } else {
    // served over http(s)
    if (pathname.toLowerCase().includes('/en/')) {
      href = location.origin + replaceEnWithKa(pathname);
    } else if (pathname.toLowerCase().includes('/ka/')) {
      // already in ka, keep same page
      href = location.origin + pathname;
    } else {
      // not in any lang folder. Try to detect project subfolder like /UniQuest/
      const parts = pathname.split('/').filter(Boolean);
      if (parts[0] && parts[0].toLowerCase() === 'uniquest') {
        href = location.origin + '/UniQuest/ka/' + currentFile;
      } else {
        href = location.origin + '/ka/' + currentFile;
      }
    }
  }

  georgianLink.setAttribute('href', href);
});
</script>
